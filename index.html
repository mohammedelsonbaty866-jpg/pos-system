<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ù†Ø¸Ø§Ù… ÙƒØ§Ø´ÙŠØ± POS</title>

<style>
body{margin:0;font-family:Tahoma;background:#f1f5f9}
header{
background:#0f172a;color:#fff;
padding:12px;text-align:center;font-size:18px
}
nav{
display:flex;
justify-content:space-around;
background:#020617;
padding:8px
}
nav button{
background:none;border:0;color:#fff;
font-size:14px;cursor:pointer
}
.screen{display:none;padding:10px}
.active{display:block}
.box{
background:#fff;border-radius:12px;
padding:12px;margin-bottom:10px;
box-shadow:0 2px 6px rgba(0,0,0,.08)
}
input,select{
width:100%;padding:10px;
margin-top:6px;font-size:15px;
border-radius:10px;border:1px solid #ccc
}
.btn{
width:100%;padding:12px;
border-radius:12px;border:0;
font-size:16px;margin-top:8px
}
.green{background:#22c55e;color:#fff}
.blue{background:#3b82f6;color:#fff}
.red{background:#ef4444;color:#fff}
.item{border-bottom:1px dashed #ccc;padding:6px 0}
#total{font-size:18px;font-weight:bold;text-align:center}
</style>
</head>

<body>

<header>ğŸ§¾ Ù†Ø¸Ø§Ù… Ù…Ø­Ø§Ø³Ø¨ÙŠ POS</header>

<nav>
<button onclick="show('cashier')">Ø§Ù„ÙƒØ§Ø´ÙŠØ±</button>
<button onclick="show('products')">Ø§Ù„Ø£ØµÙ†Ø§Ù</button>
<button onclick="show('reports')">Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</button>
</nav>

<!-- Ø§Ù„ÙƒØ§Ø´ÙŠØ± -->
<div id="cashier" class="screen active">

<div class="box">
<input id="search" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù">
<input id="qty" type="number" value="1">
<button class="btn blue" onclick="addItem()">Ø¥Ø¶Ø§ÙØ©</button>
</div>

<div class="box">
<h3>Ø§Ù„ÙØ§ØªÙˆØ±Ø©</h3>
<div id="invoice"></div>
<div id="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0</div>
<button class="btn green" onclick="saveInvoice()">Ø­ÙØ¸ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
</div>

</div>

<!-- Ø§Ù„Ø£ØµÙ†Ø§Ù -->
<div id="products" class="screen">

<div class="box">
<h3>â• Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù</h3>
<input id="pn" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù">
<input id="pp" type="number" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹">
<input id="pc" type="number" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡">
<input id="ps" type="number" placeholder="Ø§Ù„Ù…Ø®Ø²ÙˆÙ†">
<button class="btn green" onclick="addProduct()">Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù</button>
</div>

<div class="box">
<h3>ğŸ“¦ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£ØµÙ†Ø§Ù</h3>
<div id="plist"></div>
</div>

</div>

<!-- Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± -->
<div id="reports" class="screen">

<div class="box">
<h3>ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…</h3>
<div id="report"></div>
</div>

</div>

<script>
let products=JSON.parse(localStorage.products||"[]");
let invoices=JSON.parse(localStorage.invoices||"[]");
let cart=[];

/* ØªÙ†Ù‚Ù„ */
function show(id){
document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
if(id=="products")renderProducts();
if(id=="reports")renderReports();
}

/* Ø§Ù„Ø£ØµÙ†Ø§Ù */
function addProduct(){
products.push({
n:pn.value,
p:+pp.value,
c:+pc.value,
s:+ps.value
});
localStorage.products=JSON.stringify(products);
pn.value=pp.value=pc.value=ps.value="";
renderProducts();
alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù");
}

function renderProducts(){
plist.innerHTML="";
products.forEach(p=>{
plist.innerHTML+=`
<div class="item">
<b>${p.n}</b><br>
Ø¨ÙŠØ¹: ${p.p} | Ù…Ø®Ø²ÙˆÙ†: ${p.s}
</div>`;
});
}

/* Ø§Ù„ÙƒØ§Ø´ÙŠØ± */
function addItem(){
let p=products.find(x=>x.n==search.value);
if(!p)return alert("Ø§Ù„ØµÙ†Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
if(p.s<qty.value)return alert("Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ØºÙŠØ± ÙƒØ§ÙÙŠ");
cart.push({n:p.n,p:p.p,c:p.c,q:+qty.value});
p.s-=qty.value;
localStorage.products=JSON.stringify(products);
renderInvoice();
}

function renderInvoice(){
invoice.innerHTML="";
let t=0;
cart.forEach(i=>{
t+=i.p*i.q;
invoice.innerHTML+=`
<div class="item">
${i.n} | ${i.q} Ã— ${i.p}
</div>`;
});
total.innerText="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: "+t;
}

function saveInvoice(){
if(cart.length==0)return;
let totalVal=cart.reduce((a,i)=>a+i.p*i.q,0);
invoices.push({
date:new Date().toLocaleString(),
total:totalVal,
items:cart
});
localStorage.invoices=JSON.stringify(invoices);
cart=[];
renderInvoice();
alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„ÙØ§ØªÙˆØ±Ø©");
}

/* Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± */
function renderReports(){
let sum=0;
report.innerHTML="";
invoices.forEach(i=>{
sum+=i.total;
report.innerHTML+=`
<div class="item">
${i.date} | ${i.total}
</div>`;
});
report.innerHTML+=`<hr><b>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª: ${sum}</b>`;
}
</script>

</body>
</html>
