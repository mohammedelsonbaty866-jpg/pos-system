<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>POS System</title>

<style>
body{margin:0;font-family:Arial;background:#f1f5f9}
.hidden{display:none}
header{background:#020617;color:#fff;padding:12px;text-align:center}
button{padding:10px;border:none;border-radius:8px;cursor:pointer}
.btn{background:#22c55e;color:#fff}
.btn-danger{background:#ef4444;color:#fff}
input,select{padding:10px;width:100%;margin-bottom:8px;border-radius:8px;border:1px solid #cbd5f5}
.card{background:#fff;padding:10px;border-radius:10px;margin-bottom:8px;box-shadow:0 3px 6px rgba(0,0,0,.1)}
#menu{position:fixed;right:-220px;top:0;width:200px;height:100%;background:#020617;color:#fff;padding:10px;transition:.3s}
#menu button{width:100%;background:none;color:#fff;text-align:right}
#productsGrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:8px}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
<header>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</header>
<div style="padding:15px">
<input id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
<input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
<button class="btn" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>
</div>

<!-- APP -->
<div id="app" class="hidden">

<header>
<span id="shopName">POS System</span>
<button onclick="toggleMenu()">â˜°</button>
</header>

<div id="menu">
<button onclick="show('cashier')">ğŸ§¾ ÙƒØ§Ø´ÙŠØ±</button>
<button onclick="show('products')">ğŸ“¦ Ø£ØµÙ†Ø§Ù</button>
<button onclick="show('customers')">ğŸ‘¤ Ø¹Ù…Ù„Ø§Ø¡</button>
<button onclick="show('reports')">ğŸ“Š ØªÙ‚Ø§Ø±ÙŠØ±</button>
<button onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬</button>
</div>

<!-- CASHIER -->
<div id="cashier" class="screen">
<h3>Ø§Ù„ÙƒØ§Ø´ÙŠØ±</h3>
<input id="search" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù">
<button class="btn" onclick="addItem()">Ø¥Ø¶Ø§ÙØ©</button>
<div id="invoice"></div>
<div id="total">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: 0</div>
<button class="btn" onclick="saveInvoice()">Ø­ÙØ¸ Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
</div>

<!-- PRODUCTS -->
<div id="products" class="screen hidden">
<h3>Ø§Ù„Ø£ØµÙ†Ø§Ù</h3>
<input id="pn" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù">
<input id="pp" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹">
<input id="pc" placeholder="Ø³Ø¹Ø± Ø§Ù„Ø´Ø±Ø§Ø¡">
<input id="ps" placeholder="Ø§Ù„Ù…Ø®Ø²ÙˆÙ†">
<button class="btn" onclick="addProduct()">Ø­ÙØ¸</button>
<div id="productsGrid"></div>
</div>

<!-- CUSTOMERS -->
<div id="customers" class="screen hidden">
<h3>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</h3>
<input id="cn" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
<button class="btn" onclick="addCustomer()">Ø¥Ø¶Ø§ÙØ©</button>
<div id="customerList"></div>
</div>

<!-- REPORTS -->
<div id="reports" class="screen hidden">
<h3>Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h3>
<div id="reportBox"></div>
</div>

</div>

<script>
/* USERS */
const users=[
 {u:"admin",p:"1234",role:"admin"},
 {u:"cashier",p:"1234",role:"cashier"}
];
let currentUser=null;

/* DATA */
let products=JSON.parse(localStorage.products||"[]");
let customers=JSON.parse(localStorage.customers||"[]");
let invoices=JSON.parse(localStorage.invoices||"[]");
let cart=[];

/* LOGIN */
function login(){
 let u=username.value.trim();
 let p=password.value.trim();
 let user=users.find(x=>x.u===u && x.p===p);
 if(!user){alert("Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± ØµØ­ÙŠØ­Ø©");return}
 currentUser=user;
 document.getElementById("login").classList.add("hidden");
 document.getElementById("app").classList.remove("hidden");
 renderProducts();
 renderCustomers();
}
function logout(){
 location.reload();
}

/* MENU */
function toggleMenu(){
 menu.style.right=menu.style.right=="0px"?"-220px":"0px";
}
function show(id){
 document.querySelectorAll(".screen").forEach(s=>s.classList.add("hidden"));
 document.getElementById(id).classList.remove("hidden");
 menu.style.right="-220px";
}

/* PRODUCTS */
function addProduct(){
 products.push({n:pn.value,p:+pp.value,c:+pc.value,s:+ps.value});
 save();renderProducts();
}
function renderProducts(){
 productsGrid.innerHTML="";
 products.forEach(p=>{
  productsGrid.innerHTML+=`
  <div class="card" onclick="addFromGrid('${p.n}')">
  <b>${p.n}</b><br>${p.p} Ø¬Ù†ÙŠÙ‡
  </div>`;
 });
}

/* CASHIER */
function addFromGrid(name){
 search.value=name;
 addItem();
}
function addItem(){
 let p=products.find(x=>x.n===search.value);
 if(!p){alert("Ø§Ù„ØµÙ†Ù ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");return}
 if(p.s<=0){alert("Ù†ÙØ§Ø¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†");return}
 cart.push(p);
 p.s--;
 renderInvoice();save();
}
function renderInvoice(){
 invoice.innerHTML="";
 let t=0;
 cart.forEach(i=>{
  t+=i.p;
  invoice.innerHTML+=`<div class="card">${i.n} - ${i.p}</div>`;
 });
 total.innerText="Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: "+t;
}
function saveInvoice(){
 if(cart.length==0)return;
 invoices.push({date:new Date().toLocaleString(),items:cart});
 cart=[];renderInvoice();save();
 alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„ÙØ§ØªÙˆØ±Ø©");
}

/* CUSTOMERS */
function addCustomer(){
 customers.push({n:cn.value,b:0});
 save();renderCustomers();
}
function renderCustomers(){
 customerList.innerHTML="";
 customers.forEach(c=>{
  customerList.innerHTML+=`<div class="card">${c.n}</div>`;
 });
}

/* REPORTS */
function renderReports(){
 reportBox.innerHTML="Ø¹Ø¯Ø¯ Ø§Ù„ÙÙˆØ§ØªÙŠØ±: "+invoices.length;
}

/* SAVE */
function save(){
 localStorage.products=JSON.stringify(products);
 localStorage.customers=JSON.stringify(customers);
 localStorage.invoices=JSON.stringify(invoices);
 renderReports();
}
</script>

</body>
</html>
