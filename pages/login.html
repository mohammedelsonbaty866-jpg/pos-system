<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>تسجيل الدخول</title>
<link rel="stylesheet" href="../assets/css/auth.css">
</head>

<body>

<div class="auth-box">
  <h2>تسجيل الدخول</h2>

  <input id="loginUser" placeholder="اسم المستخدم">
  <input id="loginPass" type="password" placeholder="كلمة المرور">
  <button onclick="login()">دخول</button>

  <hr>

  <h3>إنشاء حساب جديد</h3>
  <input id="regUser" placeholder="اسم المستخدم">
  <input id="regPass" type="password" placeholder="كلمة المرور">
  <select id="regRole">
    <option value="cashier">كاشير</option>
    <option value="admin">مدير</option>
  </select>
  <button onclick="register()">تسجيل</button>

  <p id="msg"></p>
</div>

<script src="../core/storage.js"></script>
<script src="../core/users.js"></script>
<script src="../core/auth.js"></script>

<script>
function login() {
  const u = loginUser.value;
  const p = loginPass.value;

  if (Auth.login(u, p)) {
    location.href = "../index.html";
  } else {
    msg.textContent = "بيانات الدخول غير صحيحة";
  }
}

function register() {
  const u = regUser.value;
  const p = regPass.value;
  const r = regRole.value;

  if (Auth.register(u, p, r)) {
    msg.textContent = "تم إنشاء الحساب – سجل دخول";
  } else {
    msg.textContent = "اسم المستخدم موجود";
  }
}
</script>

</body>
</html>
