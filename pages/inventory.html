<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
<link rel="stylesheet" href="../assets/css/style.css">
</head>

<body>
<script src="../core/storage.js"></script>
<script src="../core/license.js"></script>
<script src="../core/pro-guard.js"></script>
<script src="../core/storage.js"></script>
<script src="../core/auth-guard.js"></script>
<script src="../core/products.js"></script>
<script src="../core/inventory.js"></script>
<script src="../core/inventory-log.js"></script>

<h1>ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h1>

<table>
  <thead>
    <tr>
      <th>Ø§Ù„ØµÙ†Ù</th>
      <th>Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</th>
      <th>Ø­Ø¯ Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡</th>
      <th>ØªÙˆØ±ÙŠØ¯</th>
    </tr>
  </thead>
  <tbody id="table"></tbody>
</table>

<h3>ğŸ“‘ Ø³Ø¬Ù„ Ø§Ù„Ø­Ø±ÙƒØ©</h3>
<div id="log"></div>

<script>
function render(){
  const products = Products.getAll();
  table.innerHTML = "";

  products.forEach((p,i)=>{
    table.innerHTML += `
      <tr style="background:${p.stock<=p.min?'#fee':''}">
        <td>${p.name}</td>
        <td>${p.stock}</td>
        <td>${p.min}</td>
        <td>
          <button onclick="add(${i})">â•</button>
        </td>
      </tr>
    `;
  });

  log.innerHTML = InventoryLog.getAll().map(l =>
    `<div>${l.date} | ${l.type} | ${l.name} (${l.qty})</div>`
  ).join("");
}

function add(i){
  const qty = +prompt("Ø§Ù„ÙƒÙ…ÙŠØ©");
  if(qty>0){
    Inventory.restock(i,qty);
    render();
  }
}

render();
</script>

</body>
</html>
