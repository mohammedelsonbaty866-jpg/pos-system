<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>POS Pro | تسجيل الدخول</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="assets/css/style.css">

<style>
body{
  margin:0;
  font-family:Arial;
  background:#020617;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
}

.card{
  background:#fff;
  padding:20px;
  border-radius:16px;
  width:100%;
  max-width:360px;
}

h2{
  text-align:center;
  margin-bottom:12px;
}

input{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  border-radius:10px;
  border:1px solid #cbd5f5;
}

button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:12px;
  background:#22c55e;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}

.switch{
  text-align:center;
  margin-top:10px;
  color:#2563eb;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="card">

  <h2 id="title">تسجيل الدخول</h2>

  <input id="phone" placeholder="رقم الهاتف">
  <input id="password" type="password" placeholder="كلمة المرور">

  <button onclick="submit()">دخول</button>

  <div class="switch" onclick="toggleMode()" id="switchText">
    إنشاء حساب جديد
  </div>

</div>

<script>
let users = JSON.parse(localStorage.getItem("users")) || [];
let mode = "login"; // login | register

function toggleMode(){
  mode = mode === "login" ? "register" : "login";
  title.innerText = mode === "login" ? "تسجيل الدخول" : "إنشاء حساب";
  switchText.innerText = mode === "login"
    ? "إنشاء حساب جديد"
    : "لديك حساب؟ تسجيل الدخول";
}

function submit(){
  if(!phone.value || !password.value){
    alert("أكمل البيانات");
    return;
  }

  if(mode === "register"){
    if(users.find(u=>u.phone===phone.value)){
      alert("الحساب موجود");
      return;
    }
    users.push({
      phone: phone.value,
      password: password.value,
      role: "owner"
    });
    localStorage.setItem("users", JSON.stringify(users));
    alert("تم إنشاء الحساب");
    toggleMode();
    return;
  }

  // login
  const user = users.find(
    u=>u.phone===phone.value && u.password===password.value
  );

  if(!user){
    alert("بيانات غير صحيحة");
    return;
  }

  localStorage.setItem("loggedUser", JSON.stringify(user));
  location.href = "index.html";
}
</script>

</body>
</html>
